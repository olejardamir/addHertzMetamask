{"ast":null,"code":"import _regeneratorRuntime from\"/home/damir/addHertzMetamask/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/damir/addHertzMetamask/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/damir/addHertzMetamask/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/damir/addHertzMetamask/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/damir/addHertzMetamask/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/damir/addHertzMetamask/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/damir/addHertzMetamask/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import PropTypes from'prop-types';import SwitchNetworkNotice from'./SwitchNetworkNotice';import Button from'@material-ui/core/Button';import Table from'@material-ui/core/Table';import TableBody from'@material-ui/core/TableBody';import TableRow from'@material-ui/core/TableRow';import TableCell from'@material-ui/core/TableCell';import DownloadMetaMaskButton from'./DownloadMetaMaskButton';import Eth from'ethjs-query';import logo from'./coin.jpg';import queryString from'querystringify';var metaMarkAddress='0x6a4b6316D1d03d2f2B3A0294502F8fAF0F38cA14';var AddTokenPanel=/*#__PURE__*/function(_Component){_inherits(AddTokenPanel,_Component);function AddTokenPanel(props){var _this;_classCallCheck(this,AddTokenPanel);var _props$tokenName=props.tokenName,tokenName=_props$tokenName===void 0?'Hertz':_props$tokenName,_props$tokenSymbol=props.tokenSymbol,tokenSymbol=_props$tokenSymbol===void 0?'HZ':_props$tokenSymbol,_props$tokenDecimals=props.tokenDecimals,tokenDecimals=_props$tokenDecimals===void 0?18:_props$tokenDecimals,_props$totalSupply=props.totalSupply,totalSupply=_props$totalSupply===void 0?'21,000.00':_props$totalSupply,_props$tokenAddress=props.tokenAddress,tokenAddress=_props$tokenAddress===void 0?metaMarkAddress:_props$tokenAddress,_props$tokenImage=props.tokenImage,tokenImage=_props$tokenImage===void 0?'https://raw.githubusercontent.com/olejardamir/Hertz/master/roundLogo_400by400.png':_props$tokenImage,_props$tokenNet=props.tokenNet,tokenNet=_props$tokenNet===void 0?'1':_props$tokenNet,_props$message=props.message,message=_props$message===void 0?'':_props$message,_props$errorMessage=props.errorMessage,errorMessage=_props$errorMessage===void 0?'':_props$errorMessage,_props$net=props.net,net=_props$net===void 0?'1':_props$net;_this=_possibleConstructorReturn(this,_getPrototypeOf(AddTokenPanel).call(this));_this.state={tokenName:tokenName,tokenSymbol:tokenSymbol,tokenDecimals:tokenDecimals,totalSupply:totalSupply,tokenAddress:tokenAddress,tokenImage:tokenImage,tokenNet:tokenNet,message:message,errorMessage:errorMessage,net:net};var search=window.location.search;var params=queryString.parse(search);for(var key in params){_this.state[key]=params[key];}_this.updateNet();return _this;}_createClass(AddTokenPanel,[{key:\"componentDidMount\",value:function componentDidMount(){var search=this.props.location.search;var params=queryString.parse(search);this.setState(params);}},{key:\"updateNet\",value:function(){var _updateNet=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var provider,eth,realNet;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:provider=window.web3.currentProvider;eth=new Eth(provider);_context.next=4;return eth.net_version();case 4:realNet=_context.sent;this.setState({net:realNet});case 6:case\"end\":return _context.stop();}}},_callee,this);}));function updateNet(){return _updateNet.apply(this,arguments);}return updateNet;}()},{key:\"render\",value:function render(props,context){var _this2=this;var _this$state=this.state,tokenName=_this$state.tokenName,tokenSymbol=_this$state.tokenSymbol,tokenDecimals=_this$state.tokenDecimals,totalSupply=_this$state.totalSupply,tokenNet=_this$state.tokenNet,net=_this$state.net,tokenImage=_this$state.tokenImage,tokenAddress=_this$state.tokenAddress,message=_this$state.message,errorMessage=_this$state.errorMessage;var error;if(errorMessage!==''){error=React.createElement(\"p\",{className:\"errorMessage\"},\"There was a problem adding this token to your wallet. Make sure you have the latest version of MetaMask installed!\",React.createElement(DownloadMetaMaskButton,null));}if(tokenNet!==net){return React.createElement(SwitchNetworkNotice,{net:net,tokenNet:tokenNet});}return React.createElement(\"div\",{className:\"values\"},React.createElement(\"header\",{className:\"App-header\"},React.createElement(\"img\",{src:tokenImage||logo,className:\"logo\",alt:\"Coin\"}),React.createElement(\"h1\",{className:\"App-title\"},\"Add \",tokenName,\" to Metamask: \")),React.createElement(Table,null,React.createElement(TableBody,null,React.createElement(TableRow,null,React.createElement(TableCell,null,\"Symbol\"),React.createElement(TableCell,null,tokenSymbol)),React.createElement(TableRow,null,React.createElement(TableCell,null,\"Decimals\"),React.createElement(TableCell,null,tokenDecimals)),React.createElement(TableRow,null,React.createElement(TableCell,null,\"Total Supply\"),React.createElement(TableCell,null,totalSupply)))),React.createElement(\"div\",null,React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null)),React.createElement(\"div\",null,React.createElement(Button,{onClick:/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var provider;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:provider=window.web3.currentProvider;provider.sendAsync({method:'metamask_watchAsset',params:{\"type\":\"ERC20\",\"options\":{\"address\":tokenAddress,\"symbol\":tokenSymbol,\"decimals\":tokenDecimals,\"image\":tokenImage}},id:Math.round(Math.random()*100000)},function(err,added){console.log('provider returned',err,added);if(err||'error'in added){_this2.setState({errorMessage:'There was a problem adding the token.',message:''});return;}_this2.setState({message:'',errorMessage:''});});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref.apply(this,arguments);};}()},\"Click here to add to MetaMask\")),React.createElement(\"p\",null,message),error,React.createElement(\"div\",{className:\"spacer\"}));}}]);return AddTokenPanel;}(Component);AddTokenPanel.contextTypes={web3:PropTypes.object};export default AddTokenPanel;","map":{"version":3,"sources":["/home/damir/addHertzMetamask/src/AddTokenPanel.jsx"],"names":["React","Component","PropTypes","SwitchNetworkNotice","Button","Table","TableBody","TableRow","TableCell","DownloadMetaMaskButton","Eth","logo","queryString","metaMarkAddress","AddTokenPanel","props","tokenName","tokenSymbol","tokenDecimals","totalSupply","tokenAddress","tokenImage","tokenNet","message","errorMessage","net","state","search","window","location","params","parse","key","updateNet","setState","provider","web3","currentProvider","eth","net_version","realNet","context","error","event","sendAsync","method","id","Math","round","random","err","added","console","log","contextTypes","object"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport SwitchNetworkNotice from './SwitchNetworkNotice'\nimport Button from '@material-ui/core/Button';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableCell from '@material-ui/core/TableCell';\nimport DownloadMetaMaskButton from './DownloadMetaMaskButton';\nimport Eth from 'ethjs-query';\nimport logo from './coin.jpg';\nimport queryString from 'querystringify'\n\nconst metaMarkAddress = '0x6a4b6316D1d03d2f2B3A0294502F8fAF0F38cA14';\n\nclass AddTokenPanel extends Component {\n\n  constructor (props) {\n    const {\n      tokenName = 'Hertz',\n        tokenSymbol = 'HZ',\n        tokenDecimals = 18,\n        totalSupply = '21,000.00',\n        tokenAddress = metaMarkAddress,\n        tokenImage = 'https://raw.githubusercontent.com/olejardamir/Hertz/master/roundLogo_400by400.png',\n        tokenNet = '1',\n        message = '',\n        errorMessage = '',\n        net = '1',\n    } = props\n\n    super()\n    this.state = {\n      tokenName,\n      tokenSymbol,\n      tokenDecimals,\n      totalSupply,\n      tokenAddress,\n      tokenImage,\n      tokenNet,\n      message,\n      errorMessage,\n      net,\n    }\n\n    const search = window.location.search\n    const params = queryString.parse(search)\n\n    for (let key in params) {\n      this.state[key] = params[key]\n    }\n\n    this.updateNet()\n  }\n\n  componentDidMount() {\n    const search = this.props.location.search\n    const params = queryString.parse(search)\n    this.setState(params)\n  }\n\n  async updateNet () {\n    const provider = window.web3.currentProvider\n    const eth = new Eth(provider)\n    const realNet = await eth.net_version()\n    this.setState({ net: realNet })\n  }\n\n  render (props, context) {\n    const {\n      tokenName,\n      tokenSymbol,\n      tokenDecimals,\n      totalSupply,\n      tokenNet,\n      net,\n      tokenImage,\n      tokenAddress,\n      message,\n      errorMessage,\n    } = this.state\n\n    let error\n    if (errorMessage !== '') {\n      error = <p className=\"errorMessage\">\n        There was a problem adding this token to your wallet. Make sure you have the latest version of MetaMask installed!\n        <DownloadMetaMaskButton/>\n      </p>\n    }\n\n    if (tokenNet !== net) {\n      return <SwitchNetworkNotice net={net} tokenNet={tokenNet}/>\n    }\n\n    return (\n      <div className=\"values\">\n        <header className=\"App-header\">\n          <img src={tokenImage || logo} className=\"logo\" alt=\"Coin\"/>\n          <h1 className=\"App-title\">Add {tokenName} to Metamask: </h1>\n        </header>\n        <Table>\n          <TableBody>\n            <TableRow>\n              <TableCell>Symbol</TableCell>\n              <TableCell>{tokenSymbol}</TableCell>\n            </TableRow>\n            <TableRow>\n              <TableCell>Decimals</TableCell>\n              <TableCell>{tokenDecimals}</TableCell>\n            </TableRow>\n            <TableRow>\n              <TableCell>Total Supply</TableCell>\n              <TableCell>{totalSupply}</TableCell>\n            </TableRow>\n          </TableBody>\n        </Table>\n        <div><br/><br/><br/></div>\n        <div>\n          <Button\n            onClick = {async (event) => {\n              const provider = window.web3.currentProvider\n              provider.sendAsync({\n                method: 'metamask_watchAsset',\n                params: {\n                  \"type\":\"ERC20\",\n                  \"options\":{\n                    \"address\": tokenAddress,\n                    \"symbol\": tokenSymbol,\n                    \"decimals\": tokenDecimals,\n                    \"image\": tokenImage,\n                  },\n                },\n                id: Math.round(Math.random() * 100000),\n              }, (err, added) => {\n                console.log('provider returned', err, added)\n                if (err || 'error' in added) {\n                  this.setState({\n                    errorMessage: 'There was a problem adding the token.',\n                    message: '',\n                  })\n                  return\n                }\n                this.setState({\n                  message: '',\n                  errorMessage: '',\n                })\n              })\n            }}\n          >Click here to add to MetaMask</Button>\n        </div>\n\n        <p>{message}</p>\n        {error}\n\n        <div className=\"spacer\"></div>\n\n\n\n      </div>\n    )\n  }\n}\n\nAddTokenPanel.contextTypes = {\n  web3: PropTypes.object,\n}\n\nexport default AddTokenPanel;\n\n"]},"metadata":{},"sourceType":"module"}